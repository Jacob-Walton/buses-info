{"version":3,"file":"businfo.js","sources":["../../watcher/js/modules/logging.js","../../watcher/js/businfo.js"],"sourcesContent":["/**\r\n * @fileoverview JavaScript module for logging messages\r\n * @description This module provides logging functionality with different log levels.\r\n * @version 1.0.0\r\n */\r\n\r\nconst Logger = (function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @constant {Object} LOG_LEVELS\r\n     * @description Enumeration of log levels with corresponding numeric values.\r\n     * Higher values indicate higher severity.\r\n     */\r\n    const LOG_LEVELS = Object.freeze({\r\n        TRACE: 0,\r\n        DEBUG: 1,\r\n        INFO: 2,\r\n        WARN: 3,\r\n        ERROR: 4,\r\n        FATAL: 5,\r\n    });\r\n\r\n    /**\r\n     * @constant {Object} LOG_COLORS\r\n     * @description Mapping of log levels to their respective console color styles.\r\n     */\r\n    const LOG_COLORS = Object.freeze({\r\n        TRACE: \"color: #A9A9A9\",\r\n        DEBUG: \"color: #4169E1\",\r\n        INFO: \"color: #2E8B57\",\r\n        WARN: \"color: #FF8C00\",\r\n        ERROR: \"color: #DC143C\",\r\n        FATAL: \"color: #8B0000; font-weight: bold\",\r\n    });\r\n\r\n    /**\r\n     * @typedef {Object} LoggerConfig\r\n     * @property {number} MIN_LOG_LEVEL - Minimum log level to be displayed\r\n     * @property {number} MAX_CONSOLE_LOGS - Maximum number of logs to keep in console\r\n     * @property {boolean} TRACE_ENABLED - Flag to enable TRACE level logging\r\n     * @property {boolean} PERFORMANCE_LOGGING - Flag to enable performance logging\r\n     * @property {boolean} GROUP_LOGS - Flag to group logs in console\r\n     */\r\n\r\n    /**\r\n     * @type {LoggerConfig}\r\n     * @description Default configuration for the Logger\r\n     */\r\n    const CONFIG = {\r\n        MIN_LOG_LEVEL: LOG_LEVELS.WARN,\r\n        MAX_CONSOLE_LOGS: 1000,\r\n        TRACE_ENABLED: false,\r\n        PERFORMANCE_LOGGING: false,\r\n        GROUP_LOGS: true,\r\n    };\r\n\r\n    let logCount = 0;\r\n    const performanceMarks = new Map();\r\n\r\n    /**\r\n     * Formats the log message with timestamp and context\r\n     * @param {string} level - Log level\r\n     * @param {string} message - Log message\r\n     * @param {Object} [context] - Additional context for the log\r\n     * @returns {string} Formatted log message\r\n     */\r\n    function formatMessage(level, message, context) {\r\n        const timestamp = new Date().toISOString();\r\n        const formattedContext = context\r\n            ? `\\n${JSON.stringify(context, null, 2)}`\r\n            : \"\";\r\n        return `[${timestamp}] [${level}] ${message}${formattedContext}`;\r\n    }\r\n\r\n    /**\r\n     * Logs the formatted message to the console if it meets the minimum log level\r\n     * @param {number} level - Numeric log level\r\n     * @param {string} formattedMessage - Pre-formatted log message\r\n     */\r\n    function logToConsole(level, formattedMessage) {\r\n        if (level >= CONFIG.MIN_LOG_LEVEL) {\r\n            const logMethod =\r\n                level === LOG_LEVELS.TRACE\r\n                    ? \"trace\"\r\n                    : level === LOG_LEVELS.DEBUG\r\n                        ? \"debug\"\r\n                        : level === LOG_LEVELS.INFO\r\n                            ? \"info\"\r\n                            : level === LOG_LEVELS.WARN\r\n                                ? \"warn\"\r\n                                : \"error\";\r\n\r\n            const logColor = LOG_COLORS[Object.keys(LOG_LEVELS)[level]];\r\n\r\n            if (CONFIG.GROUP_LOGS) {\r\n                console.groupCollapsed(`%c${formattedMessage}`, logColor);\r\n                console.trace(\"Log location\");\r\n                console.groupEnd();\r\n            } else {\r\n                console[logMethod](`%c${formattedMessage}`, logColor);\r\n            }\r\n\r\n            logCount++;\r\n            if (logCount > CONFIG.MAX_CONSOLE_LOGS) {\r\n                console.warn(\r\n                    `Maximum log count (${CONFIG.MAX_CONSOLE_LOGS}) exceeded. Oldest logs may be lost in console.`\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Core logging function\r\n     * @param {number} level - Numeric log level\r\n     * @param {string} message - Log message\r\n     * @param {Object} [context] - Additional context for the log\r\n     */\r\n    function log(level, message, context) {\r\n        const formattedMessage = formatMessage(level, message, context);\r\n        logToConsole(level, formattedMessage);\r\n    }\r\n\r\n    /**\r\n     * Starts a performance mark for timing operations\r\n     * @param {string} markName - Unique identifier for the performance mark\r\n     */\r\n    function startPerformanceMark(markName) {\r\n        if (CONFIG.PERFORMANCE_LOGGING) {\r\n            const start = performance.now();\r\n            performanceMarks.set(markName, start);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Ends a performance mark and logs the duration\r\n     * @param {string} markName - Identifier of the performance mark to end\r\n     */\r\n    function endPerformanceMark(markName) {\r\n        if (CONFIG.PERFORMANCE_LOGGING && performanceMarks.has(markName)) {\r\n            const end = performance.now();\r\n            const start = performanceMarks.get(markName);\r\n            const duration = end - start;\r\n            performanceMarks.delete(markName);\r\n            log(\r\n                LOG_LEVELS.DEBUG,\r\n                `Performance: ${markName} took ${duration.toFixed(2)}ms`\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Displays a large warning message in the console for developers\r\n     */\r\n    function displaySecurityAdvisory() {\r\n        const baseStyles = [\r\n            \"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif\",\r\n            \"line-height: 1.5\",\r\n            \"padding: 15px\",\r\n        ].join(\";\");\r\n\r\n        const warningStyles = [\r\n            \"background-color: #e84430\",\r\n            \"color: #ffffff\",\r\n            \"font-size: 18px\",\r\n            \"font-weight: bold\",\r\n            baseStyles,\r\n        ].join(\";\");\r\n\r\n        const headerStyles = [\r\n            \"background-color: #13253c\",\r\n            \"color: #ffffff\",\r\n            \"font-size: 16px\",\r\n            \"font-weight: bold\",\r\n            baseStyles,\r\n        ].join(\";\");\r\n\r\n        const bodyStyles = [\r\n            \"background-color: #13253c\",\r\n            \"color: #ffffff\",\r\n            \"font-size: 14px\",\r\n            \"font-weight: normal\",\r\n            baseStyles,\r\n        ].join(\";\");\r\n\r\n        console.log(\r\n            \"%cWARNING: %cDeveloper Console%c\" +\r\n            \"This area is intended for development use only. \" +\r\n            \"Do not copy-paste or run code from untrusted sources here. \" +\r\n            \"Executing unfamiliar code can compromise your account and system security. \" +\r\n            \"Only use this console if you fully understand the implications of your actions. \" +\r\n            \"This is a site for bus information, not a site for storing sensitive information. \" +\r\n            \"Please do not enter any sensitive information here or interact with any prompts. \" +\r\n            \"If you see any unexpected prompts, close this page immediately.\",\r\n            warningStyles,\r\n            headerStyles,\r\n            bodyStyles\r\n        );\r\n    }\r\n\r\n    // Display security advisory\r\n    displaySecurityAdvisory();\r\n\r\n    // Public API\r\n    return {\r\n        /**\r\n         * Updates the Logger configuration\r\n         * @param {Partial<LoggerConfig>} newConfig - New configuration options\r\n         */\r\n        setConfig: function (newConfig) {\r\n            Object.assign(CONFIG, newConfig);\r\n        },\r\n        /**\r\n         * Logs a TRACE level message\r\n         * @param {string} message - Log message\r\n         * @param {Object} [context] - Additional context\r\n         */\r\n        trace: (message, context) => {\r\n            if (CONFIG.TRACE_ENABLED) log(LOG_LEVELS.TRACE, message, context);\r\n        },\r\n        /**\r\n         * Logs a DEBUG level message\r\n         * @param {string} message - Log message\r\n         * @param {Object} [context] - Additional context\r\n         */\r\n        debug: (message, context) => log(LOG_LEVELS.DEBUG, message, context),\r\n        /**\r\n         * Logs an INFO level message\r\n         * @param {string} message - Log message\r\n         * @param {Object} [context] - Additional context\r\n         */\r\n        info: (message, context) => log(LOG_LEVELS.INFO, message, context),\r\n        /**\r\n         * Logs a WARN level message\r\n         * @param {string} message - Log message\r\n         * @param {Object} [context] - Additional context\r\n         */\r\n        warn: (message, context) => log(LOG_LEVELS.WARN, message, context),\r\n        /**\r\n         * Logs an ERROR level message\r\n         * @param {string} message - Log message\r\n         * @param {Object} [context] - Additional context\r\n         */\r\n        error: (message, context) => log(LOG_LEVELS.ERROR, message, context),\r\n        /**\r\n         * Logs a FATAL level message\r\n         * @param {string} message - Log message\r\n         * @param {Object} [context] - Additional context\r\n         */\r\n        fatal: (message, context) => log(LOG_LEVELS.FATAL, message, context),\r\n        /**\r\n         * Starts a performance mark\r\n         * @param {string} markName - Unique identifier for the performance mark\r\n         */\r\n        startPerformanceMark: startPerformanceMark,\r\n        /**\r\n         * Ends a performance mark and logs the duration\r\n         * @param {string} markName - Identifier of the performance mark to end\r\n         */\r\n        endPerformanceMark: endPerformanceMark,\r\n        /**\r\n         * Returns the current log count\r\n         * @returns {number} Total number of logs\r\n         */\r\n        getLogCount: () => logCount,\r\n    };\r\n})();\r\n\r\n// Added default export to allow default import in businfo.js\r\nexport default Logger;\r\n","// TODO: Rewrite to accomodate our new API and project structure\r\n\r\nimport dayjs from 'dayjs';\r\nimport Logger from './modules/logging.js';\r\n\r\n/**\r\n * @fileoverview JavaScript module for displaying bus information\r\n * @description This module fetches bus information from an API and displays it in the UI.\r\n * @version 0.1.0\r\n * @author Jacob Walton\r\n * @requires dayjs\r\n * @requires Logger\r\n * @module BusInfoModule\r\n */\r\n\r\nconst BusInfoModule = (() => {\r\n\t/**\r\n\t * @constant {Object} CONFIG\r\n\t * @description Configuration object for the BusInfoModule\r\n\t */\r\n\tconst CONFIG = Object.freeze({\r\n\t\tAPI_ENDPOINT: \"/api/v2/businfo\",\r\n\t\tREFRESH_INTERVAL: 30000,\r\n\t\tERROR_DISPLAY_DURATION: 5000,\r\n\t\tSEARCH_DEBOUNCE_DELAY: 300,\r\n\t\tSELECTORS: Object.freeze({\r\n\t\t\tbusInfoList: \"#busInfoList\",\r\n\t\t\tlastUpdated: \"#lastUpdated\",\r\n\t\t\terror: \"#error\",\r\n\t\t\tloadingIndicator: \"#loadingIndicator\",\r\n\t\t\tsearchInput: \"#searchInput\",\r\n\t\t}),\r\n\t\tTIME_FORMAT: {\r\n\t\t\ttoday: \"HH:mm\",\r\n\t\t\tother: \"DD/MM HH:mm\",\r\n\t\t},\r\n\t\tPREFERENCES_ENDPOINT: \"/api/accounts/preferences\",\r\n\t\tSECTION_STORAGE_KEY: 'businfo_collapsed_sections',\r\n\t});\r\n\r\n\t/**\r\n\t * @typedef {Object} BusInfoState\r\n\t * @property {boolean} isLoading - Flag indicating if data is being fetched\r\n\t * @property {Date|null} lastFetchTime - Timestamp of the last successful fetch\r\n\t * @property {number|null} errorTimeout - Timeout ID for error message display\r\n\t * @property {Object|null} busData - Fetched bus information data\r\n\t */\r\n\r\n\t/** @type {BusInfoState} */\r\n\tconst state = {\r\n\t\tisLoading: false,\r\n\t\tlastFetchTime: null,\r\n\t\terrorTimeout: null,\r\n\t\tbusData: null,\r\n\t\tpreferences: {\r\n\t\t\tpreferredRoutes: [],\r\n\t\t\tshowPreferredRoutesFirst: true,\r\n\t\t},\r\n\t\trefreshInterval: null,\r\n\t\tupdateTimeInterval: null,\r\n\t\tinitialized: false,\r\n\t\tcollapsedSections: new Set(),\r\n\t\tmapDisplayed: false,\r\n\t\tpredictionsDisplayed: false\r\n\t};\r\n\r\n\t/** @type {Object.<string, HTMLElement>} */\r\n\tconst elements = {};\r\n\r\n\t/**\r\n\t * Initializes DOM elements used by the module\r\n\t * @throws {Error} If any required element is not found in the DOM\r\n\t */\r\n\tfunction initializeElements() {\r\n\t\tLogger.info(\"Initializing BusInfoModule elements\");\r\n\t\tfor (const key in CONFIG.SELECTORS) {\r\n\t\t\tif (Object.hasOwn(CONFIG.SELECTORS, key)) {\r\n\t\t\t\tconst element = document.querySelector(CONFIG.SELECTORS[key]);\r\n\t\t\t\tif (!element) {\r\n\t\t\t\t\tLogger.error(`Element not found: ${CONFIG.SELECTORS[key]}`);\r\n\t\t\t\t\tthrow new Error(`Element not found: ${CONFIG.SELECTORS[key]}`);\r\n\t\t\t\t}\r\n\t\t\t\telements[key] = element;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles the visibility of the loading indicator\r\n\t * @param {boolean} show - Whether to show or hide the loading indicator\r\n\t */\r\n\tfunction showLoading(show) {\r\n\t\tstate.isLoading = show;\r\n\t\telements.loadingIndicator.style.display = show ? \"flex\" : \"none\";\r\n\t\tLogger.debug(`Loading indicator ${show ? \"shown\" : \"hidden\"}`);\r\n\t}\r\n\r\n\tfunction displayBusMap() {\r\n\t\tif (state.mapDisplayed) return;\r\n\r\n\t\tconst mapSection = document.createElement('div');\r\n\t\tmapSection.className = 'bus-section map-section';\r\n\r\n\t\tconst mapHeader = document.createElement('div');\r\n\t\tmapHeader.className = 'bus-section-header';\r\n\r\n\t\tconst mapContent = document.createElement('div');\r\n\t\tmapContent.className = 'bus-section-content single-column collapsed';\r\n\r\n\t\tmapHeader.innerHTML = `\r\n\t\t\t<div class=\"section-header-content\">\r\n\t\t\t\t<h3>Bus Map</h3>\r\n\t\t\t</div>\r\n\t\t\t<button class=\"section-toggle\" aria-label=\"Toggle section\">\r\n\t\t\t\t<i class=\"fas fa-chevron-down\"></i>\r\n\t\t\t</button>\r\n\t\t`;\r\n\r\n\t\tmapContent.innerHTML = `\r\n\t\t\t<div id=\"busMap\"></div>\r\n\t\t`;\r\n\r\n\t\tconst map = mapContent.querySelector('#busMap');\r\n\r\n\r\n\t\tfetch('/api/v2/businfo/map')\r\n\t\t\t.then(response => response.blob())\r\n\t\t\t.then(blob => {\r\n\t\t\t\tconst url = URL.createObjectURL(blob);\r\n\t\t\t\tmap.innerHTML = `<img src=\"${url}\" alt=\"Bus map\" class=\"bus-map\"/>`;\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tmap.innerHTML = 'Error loading map';\r\n\t\t\t\tconsole.error('Error loading map:', error);\r\n\t\t\t});\r\n\r\n\t\tmapSection.appendChild(mapHeader);\r\n\t\tmapSection.appendChild(mapContent);\r\n\r\n\t\t// Append it below the bus info list\r\n\t\telements.busInfoList.insertAdjacentElement('afterend', mapSection);\r\n\r\n\t\t// Add map section toggle handling\r\n\t\tmapHeader.addEventListener('click', () => {\r\n\t\t\tmapContent.classList.toggle('collapsed');\r\n\t\t\tmapHeader.querySelector('.section-toggle').style.transform =\r\n\t\t\t\tmapContent.classList.contains('collapsed') ? 'rotate(-180deg)' : 'rotate(0)';\r\n\t\t});\r\n\r\n\t\t// Add keyboard support for accessibility\r\n\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\tif (e.key === 'Enter' || e.key === ' ') {\r\n\t\t\t\tconst header = e.target.closest('.bus-section-header');\r\n\t\t\t\tif (header) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tconst section = header.closest('.bus-section');\r\n\t\t\t\t\tif (section) {\r\n\t\t\t\t\t\ttoggleSection(section.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tstate.mapDisplayed = true; // Set the flag after successful map creation\r\n\t}\r\n\r\n\t/**\r\n\t * Fetches bus information from the API\r\n\t * @returns {Promise<void>}\r\n\t */\r\n\tasync function fetchBusInfo() {\r\n\t\tLogger.info(\"Fetching bus information\");\r\n\t\tLogger.startPerformanceMark(\"fetchBusInfo\");\r\n\t\tshowLoading(true);\r\n\t\ttry {\r\n\t\t\t// Fetch bus information from the API\r\n\t\t\tconst response = await fetch(CONFIG.API_ENDPOINT);\r\n\t\t\tif (!response.ok)\r\n\t\t\t\t// Fallback to local API if the main API fails\r\n\t\t\t\tthrow new Error(\"API request failed\");\r\n\t\t\tconst data = await response.json();\r\n\r\n\t\t\tif (!data || typeof data !== \"object\" || !data.busData) {\r\n\t\t\t\tthrow new Error(\"Invalid API response format\");\r\n\t\t\t}\r\n\r\n\t\t\tstate.busData = data.busData;\r\n\t\t\tdisplayBusInfo(state.busData);\r\n\t\t\tdisplayBusMap();\r\n\t\t\tstate.lastFetchTime = new Date();\r\n\t\t\tupdateLastFetchedTime();\r\n\r\n\t\t\t// Fetch and update predictions from new BusInfoController endpoint\r\n\t\t\tfetchAndDisplayPredictions();\r\n\r\n\t\t\tLogger.info(\"Bus information fetched successfully\", {\r\n\t\t\t\tbusCount: Object.keys(state.busData).length,\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tLogger.error(\"Error fetching bus information\", { error: error.message });\r\n\t\t\tdisplayError(\"Unable to fetch bus information. Please try again.\");\r\n\t\t} finally {\r\n\t\t\tshowLoading(false);\r\n\t\t\tLogger.endPerformanceMark(\"fetchBusInfo\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Fetches user preferences from the API\r\n\t * @returns {Promise<void>}\r\n\t */\r\n\tasync function fetchPreferences() {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(CONFIG.PREFERENCES_ENDPOINT);\r\n\t\t\tif (!response.ok) return;\r\n\t\t\tconst data = await response.json();\r\n\t\t\tstate.preferences = {\r\n\t\t\t\tpreferredRoutes: data.preferredRoutes || [],\r\n\t\t\t\tshowPreferredRoutesFirst: data.showPreferredRoutesFirst,\r\n\t\t\t};\r\n\t\t\tLogger.debug(\"Preferences loaded\", state.preferences);\r\n\t\t} catch (error) {\r\n\t\t\tLogger.error(\"Error fetching preferences\", { error: error.message });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Displays fetched bus information\r\n\t * @param {Object} busData - Bus information data\r\n\t */\r\n\tfunction displayBusInfo(busData) {\r\n\t\tLogger.debug(\"Displaying bus information\");\r\n\t\telements.busInfoList.innerHTML = \"\";\r\n\r\n\t\tif (busData && Object.keys(busData).length > 0) {\r\n\t\t\tconst fragment = document.createDocumentFragment();\r\n\t\t\tconst entries = Object.entries(busData);\r\n\r\n\t\t\t// Create container for all bus sections\r\n\t\t\tconst busInfoSections = document.createElement(\"div\");\r\n\t\t\tbusInfoSections.className = \"bus-info-sections\";\r\n\r\n\t\t\t// Create preferred section if there are preferred routes\r\n\t\t\tconst preferredBuses = entries.filter(([number]) =>\r\n\t\t\t\tstate.preferences.preferredRoutes.includes(number),\r\n\t\t\t);\r\n\r\n\t\t\tif (\r\n\t\t\t\tpreferredBuses.length > 0 &&\r\n\t\t\t\tstate.preferences.showPreferredRoutesFirst\r\n\t\t\t) {\r\n\t\t\t\tconst sectionId = 'preferred-routes-section';\r\n\t\t\t\tconst preferredSection = document.createElement('div');\r\n\t\t\t\tpreferredSection.id = sectionId;\r\n\t\t\t\tpreferredSection.className = 'bus-section preferred-section';\r\n\r\n\t\t\t\tpreferredSection.innerHTML = `\r\n\t\t\t\t\t<div class=\"bus-section-header\" role=\"button\" tabindex=\"0\">\r\n\t\t\t\t\t\t<div class=\"section-header-content\">\r\n\t\t\t\t\t\t\t<h3>Preferred Routes</h3>\r\n\t\t\t\t\t\t\t<span class=\"bus-count\">${preferredBuses.length} buses</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button class=\"section-toggle\" aria-label=\"Toggle section\">\r\n\t\t\t\t\t\t\t<i class=\"fas fa-chevron-down\"></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"bus-section-content\">\r\n\t\t\t\t\t\t${renderBusCards(preferredBuses)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t`;\r\n\r\n\t\t\t\tbusInfoSections.appendChild(preferredSection);\r\n\t\t\t\tapplySectionState(sectionId);\r\n\t\t\t}\r\n\r\n\t\t\t// Create section for other buses\r\n\t\t\tconst otherBuses = entries.filter(\r\n\t\t\t\t([number]) =>\r\n\t\t\t\t\t!state.preferences.preferredRoutes.includes(number) ||\r\n\t\t\t\t\t!state.preferences.showPreferredRoutesFirst,\r\n\t\t\t);\r\n\r\n\t\t\tif (otherBuses.length > 0) {\r\n\t\t\t\tconst sectionId = 'all-routes-section';\r\n\t\t\t\tconst otherSection = document.createElement('div');\r\n\t\t\t\totherSection.id = sectionId;\r\n\t\t\t\totherSection.className = 'bus-section';\r\n\r\n\t\t\t\totherSection.innerHTML = `\r\n\t\t\t\t\t<div class=\"bus-section-header\" role=\"button\" tabindex=\"0\">\r\n\t\t\t\t\t\t<div class=\"section-header-content\">\r\n\t\t\t\t\t\t\t<h3>All Routes</h3>\r\n\t\t\t\t\t\t\t<span class=\"bus-count\">${otherBuses.length} buses</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button class=\"section-toggle\" aria-label=\"Toggle section\">\r\n\t\t\t\t\t\t\t<i class=\"fas fa-chevron-down\"></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"bus-section-content\">\r\n\t\t\t\t\t\t${renderBusCards(otherBuses)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t`;\r\n\r\n\t\t\t\tbusInfoSections.appendChild(otherSection);\r\n\t\t\t\tapplySectionState(sectionId);\r\n\t\t\t}\r\n\r\n\t\t\tfragment.appendChild(busInfoSections);\r\n\t\t\telements.busInfoList.appendChild(fragment);\r\n\t\t\thideError();\r\n\t\t} else {\r\n\t\t\tLogger.warn(\"No bus information available\");\r\n\t\t\tdisplayError(\"No bus information available\", true);\r\n\t\t}\r\n\t}\r\n\r\n\t// Helper function to render bus cards\r\n\tfunction renderBusCards(buses) {\r\n\t\treturn buses.sort((a, b) => a[0].localeCompare(b[0]))\r\n\t\t\t.map(([number, info]) => {\r\n\t\t\t\tconst isPreferred = state.preferences.preferredRoutes.includes(number);\r\n\t\t\t\tconst arrivalTime = info.lastArrival;\r\n\t\t\t\tconst timeString = formatArrivalTime(arrivalTime);\r\n\r\n\t\t\t\treturn `\r\n        <div class=\"bus-item ${info.status.toLowerCase().replace(\" \", \"-\")}${isPreferred ? \" preferred\" : \"\"}\">\r\n          <div class=\"bus-content\">\r\n            <div class=\"star-badge\" onclick=\"togglePreferredRoute('${number}', this)\">\r\n              <i class=\"fas fa-star\"></i>\r\n            </div>\r\n            <div class=\"bus-number\">${escapeHTML(number)}</div>\r\n            <div class=\"bus-bay\">\r\n              ${info.bay ? `Bay <span class=\"bus-bay__number\">${escapeHTML(info.bay)}</span>` : 'Not arrived'}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `;\r\n\t\t\t})\r\n\t\t\t.join(\"\");\r\n\t}\r\n\r\n\tasync function togglePreferredRoute(route, element) {\r\n\t\tconst busItem = element.closest(\".bus-item\");\r\n\t\tconst isCurrentlyPreferred = busItem.classList.contains(\"preferred\");\r\n\t\tconst updatedRoutes = isCurrentlyPreferred\r\n\t\t\t? state.preferences.preferredRoutes.filter((r) => r !== route)\r\n\t\t\t: [...state.preferences.preferredRoutes, route];\r\n\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(\"/api/preferences/save\", {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\tRequestVerificationToken: document.querySelector(\r\n\t\t\t\t\t\t'input[name=\"__RequestVerificationToken\"]',\r\n\t\t\t\t\t).value,\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t...state.preferences,\r\n\t\t\t\t\tpreferredRoutes: updatedRoutes,\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\r\n\t\t\tif (!response.ok) throw new Error(\"Failed to update preferences\");\r\n\r\n\t\t\tstate.preferences.preferredRoutes = updatedRoutes;\r\n\t\t\tbusItem.classList.toggle(\"preferred\");\r\n\r\n\t\t\t// Re-sort the bus list if showing preferred first\r\n\t\t\tif (state.preferences.showPreferredRoutesFirst) {\r\n\t\t\t\tdisplayBusInfo(state.busData);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error updating preferences:\", error);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction formatArrivalTime(date) {\r\n\t\tif (!date) return \"\";\r\n\r\n\t\tconst now = new Date();\r\n\t\tconst today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n\t\tconst dateToFormat = new Date(date);\r\n\r\n\t\tconst isToday =\r\n\t\t\tdateToFormat >= today &&\r\n\t\t\tdateToFormat < new Date(today.getTime() + 24 * 60 * 60 * 1000);\r\n\r\n\t\treturn isToday\r\n\t\t\t? dayjs(dateToFormat).format(\r\n\t\t\t\tCONFIG.TIME_FORMAT.today,\r\n\t\t\t)\r\n\t\t\t: dayjs(dateToFormat).format(\r\n\t\t\t\tCONFIG.TIME_FORMAT.other,\r\n\t\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Displays an error message\r\n\t * @param {string} message - Error message to display\r\n\t */\r\n\tfunction displayError(message, critical = false) {\r\n\t\tLogger.warn(message);\r\n\t\telements.error.textContent = message;\r\n\t\telements.error.style.display = \"block\";\r\n\t\tclearTimeout(state.errorTimeout);\r\n\t\tif (critical) return;\r\n\t\tstate.errorTimeout = setTimeout(hideError, CONFIG.ERROR_DISPLAY_DURATION);\r\n\t}\r\n\r\n\t/**\r\n\t * Hides the error message\r\n\t */\r\n\tfunction hideError() {\r\n\t\telements.error.style.display = \"none\";\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the last fetched time display\r\n\t */\r\n\tfunction updateLastFetchedTime() {\r\n\t\tif (state.lastFetchTime) {\r\n\t\t\tconst timeDiff = Math.round((new Date() - state.lastFetchTime) / 1000);\r\n\t\t\telements.lastUpdated.textContent = `Last updated: ${timeDiff} seconds ago`;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets up event listeners for the module\r\n\t */\r\n\tfunction setupEventListeners() {\r\n\t\tLogger.info(\"Setting up event listeners\");\r\n\t\telements.searchInput.addEventListener(\r\n\t\t\t\"input\",\r\n\t\t\tdebounce(handleSearch, CONFIG.SEARCH_DEBOUNCE_DELAY),\r\n\t\t);\r\n\t\twindow.addEventListener(\"online\", fetchBusInfo);\r\n\t\twindow.addEventListener(\"focus\", fetchBusInfo);\r\n\r\n\t\t// Add map section toggle handling\r\n\t\tconst mapHeader = document.querySelectorAll('.map-section .bus-section-header')[1];\r\n\t\tconst mapContent = document.querySelectorAll('.map-section .bus-section-content')[1];\r\n\r\n\t\tif (mapHeader && mapContent) {\r\n\t\t\tmapHeader.addEventListener('click', () => {\r\n\t\t\t\tmapContent.classList.toggle('collapsed');\r\n\t\t\t\tmapHeader.querySelector('.section-toggle').style.transform =\r\n\t\t\t\t\tmapContent.classList.contains('collapsed') ? 'rotate(-180deg)' : 'rotate(0)';\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst predictionsHeader = document.querySelector('.predictions-section .bus-section-header');\r\n\t\tconst predictionsContent = document.querySelector('.predictions-section .bus-section-content');\r\n\r\n\t\tif (predictionsHeader && predictionsContent) {\r\n\t\t\tpredictionsHeader.addEventListener('click', () => {\r\n\t\t\t\t// check we're not clicking in an input\r\n\t\t\t\tconst notClickingInInput = !event.target.closest('input');\r\n\t\t\t\tif (!notClickingInInput) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tpredictionsContent.classList.toggle('collapsed');\r\n\t\t\t\tpredictionsHeader.querySelector('.section-toggle').style.transform =\r\n\t\t\t\t\tpredictionsContent.classList.contains('collapsed') ? 'rotate(-180deg)' : 'rotate(0)';\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Add event delegation for section toggling\r\n\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\tconst header = e.target.closest('.bus-section-header');\r\n\t\t\tif (header) {\r\n\t\t\t\tconst section = header.closest('.bus-section');\r\n\t\t\t\t\r\n\t\t\t\tif (section) {\r\n\t\t\t\t\ttoggleSection(section.id, event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Add keyboard support for accessibility\r\n\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\tif (e.key === 'Enter' || e.key === ' ') {\r\n\t\t\t\tconst header = e.target.closest('.bus-section-header');\r\n\t\t\t\tif (header) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tconst section = header.closest('.bus-section');\r\n\t\t\t\t\tif (section) {\r\n\t\t\t\t\t\ttoggleSection(section.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the search functionality\r\n\t * @param {Event} event - Input event from the search field\r\n\t */\r\n\tfunction handleSearch(event) {\r\n\t\tconst searchTerm = event.target.value.toLowerCase();\r\n\t\tLogger.debug(\"Handling search\", { searchTerm });\r\n\t\tconst busItems = elements.busInfoList.querySelectorAll(\".bus-item\");\r\n\r\n\t\tfor (const item of busItems) {\r\n\t\t\tconst busNumber = item\r\n\t\t\t\t.querySelector(\".bus-number\")\r\n\t\t\t\t.textContent.toLowerCase();\r\n\t\t\tconst status = item\r\n\t\t\t\t.querySelector(\".bus-status\")\r\n\t\t\t\t.textContent.toLowerCase();\r\n\t\t\tconst isVisible =\r\n\t\t\t\tbusNumber.includes(searchTerm) || status.includes(searchTerm);\r\n\t\t\titem.style.display = isVisible ? \"\" : \"none\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a debounced function that delays invoking func until after wait milliseconds have elapsed since the last time the debounced function was invoked\r\n\t * @param {Function} func - The function to debounce\r\n\t * @param {number} wait - The number of milliseconds to delay\r\n\t * @returns {Function} The debounced function\r\n\t */\r\n\tfunction debounce(func, wait) {\r\n\t\tlet timeout;\r\n\t\treturn function executedFunction(...args) {\r\n\t\t\tconst later = () => {\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\tfunc(...args);\r\n\t\t\t};\r\n\t\t\tclearTimeout(timeout);\r\n\t\t\ttimeout = setTimeout(later, wait);\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Escapes HTML special characters in a given string\r\n\t * @param {string} unsafe - The string to escape\r\n\t * @returns {string} The escaped string\r\n\t */\r\n\tfunction escapeHTML(unsafe) {\r\n\t\treturn unsafe\r\n\t\t\t.replace(/&/g, \"&amp;\")\r\n\t\t\t.replace(/</g, \"&lt;\")\r\n\t\t\t.replace(/>/g, \"&gt;\")\r\n\t\t\t.replace(/\"/g, \"&quot;\")\r\n\t\t\t.replace(/'/g, \"&#039;\");\r\n\t}\r\n\r\n\t/**\r\n\t * Loads collapsed section states from localStorage\r\n\t */\r\n\tfunction loadSectionStates() {\r\n\t\ttry {\r\n\t\t\tconst stored = localStorage.getItem(CONFIG.SECTION_STORAGE_KEY);\r\n\t\t\tif (stored) {\r\n\t\t\t\tstate.collapsedSections = new Set(JSON.parse(stored));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tLogger.error('Error loading section states', { error: error.message });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Saves collapsed section states to localStorage\r\n\t */\r\n\tfunction saveSectionStates() {\r\n\t\ttry {\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\tCONFIG.SECTION_STORAGE_KEY,\r\n\t\t\t\tJSON.stringify([...state.collapsedSections])\r\n\t\t\t);\r\n\t\t} catch (error) {\r\n\t\t\tLogger.error('Error saving section states', { error: error.message });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles a section's collapsed state\r\n\t * @param {string} sectionId - ID of the section to toggle\r\n\t */\r\n\tfunction toggleSection(sectionId, event = null) {\r\n\t\tconst section = document.getElementById(sectionId);\r\n\t\tif (!section) return;\r\n\r\n\t\tif (event) {\r\n\t\t\t// check it's not an input element\r\n\t\t\tconst notClickingInInput = !event.target.closest('input');\r\n\t\t\tif (!notClickingInInput) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst content = section.querySelector('.bus-section-content');\r\n\t\tconst header = section.querySelector('.bus-section-header');\r\n\t\tconst isCollapsed = state.collapsedSections.has(sectionId);\r\n\r\n\t\tif (isCollapsed) {\r\n\t\t\tstate.collapsedSections.delete(sectionId);\r\n\t\t\tcontent.style.maxHeight = `${content.scrollHeight}px`;\r\n\t\t\theader.classList.remove('collapsed');\r\n\t\t} else {\r\n\t\t\tstate.collapsedSections.add(sectionId);\r\n\t\t\tcontent.style.maxHeight = '0px';\r\n\t\t\theader.classList.add('collapsed');\r\n\t\t}\r\n\r\n\t\tsaveSectionStates();\r\n\t}\r\n\r\n\t/**\r\n\t * Applies the current collapsed state to a section\r\n\t * @param {string} sectionId - ID of the section\r\n\t */\r\n\tfunction applySectionState(sectionId) {\r\n\t\tconst section = document.getElementById(sectionId);\r\n\t\tif (!section) return;\r\n\r\n\t\tconst content = section.querySelector('.bus-section-content');\r\n\t\tconst header = section.querySelector('.bus-section-header');\r\n\t\tconst isCollapsed = state.collapsedSections.has(sectionId);\r\n\r\n\t\tif (isCollapsed) {\r\n\t\t\tcontent.style.maxHeight = '0px';\r\n\t\t\theader.classList.add('collapsed');\r\n\t\t} else {\r\n\t\t\tcontent.style.maxHeight = `${content.scrollHeight}px`;\r\n\t\t\theader.classList.remove('collapsed');\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes the BusInfoModule\r\n\t */\r\n\tasync function init() {\r\n\t\t// Prevent multiple initializations\r\n\t\tif (state.initialized) {\r\n\t\t\tLogger.warn(\"BusInfoModule already initialized\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tLogger.info(\"Initializing BusInfoModule\");\r\n\t\ttry {\r\n\t\t\tinitializeElements();\r\n\t\t\tawait fetchPreferences();\r\n\t\t\tsetupEventListeners();\r\n\t\t\tawait fetchBusInfo();\r\n\r\n\t\t\t// Clear any existing intervals before setting new ones\r\n\t\t\tclearInterval(state.refreshInterval);\r\n\t\t\tclearInterval(state.updateTimeInterval);\r\n\r\n\t\t\tstate.refreshInterval = setInterval(fetchBusInfo, CONFIG.REFRESH_INTERVAL);\r\n\t\t\tstate.updateTimeInterval = setInterval(updateLastFetchedTime, 1000);\r\n\r\n\t\t\tloadSectionStates();\r\n\t\t\tsetupPredictionsSearch();\r\n\r\n\t\t\tstate.initialized = true;\r\n\t\t\tLogger.info(\"BusInfoModule initialization complete\");\r\n\t\t} catch (error) {\r\n\t\t\tLogger.error(\"Error during initialization\", { error: error.message });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Cleans up the module by clearing intervals\r\n\t */\r\n\tfunction cleanup() {\r\n\t\tclearInterval(state.refreshInterval);\r\n\t\tclearInterval(state.updateTimeInterval);\r\n\t\tstate.initialized = false;\r\n\t\tLogger.info(\"BusInfoModule cleanup complete\");\r\n\t}\r\n\r\n\t// Updated fetchAndDisplayPredictions with extra status and JSON validation\r\n\tasync function fetchAndDisplayPredictions() {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${CONFIG.API_ENDPOINT}/predictions`);\r\n\t\t\tif (response.status === 429) {\r\n\t\t\t\tLogger.warn(\"Too many requests to predictions endpoint (HTTP 429)\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tLogger.warn(\"Predictions not enabled or failed to fetch\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst predictionData = await response.json();\r\n\t\t\tif (!predictionData || typeof predictionData !== \"object\" || !predictionData.predictions) {\r\n\t\t\t\tthrow new Error(\"Invalid predictions response format\");\r\n\t\t\t}\r\n\t\t\tupdatePredictionsDisplay(predictionData);\r\n\t\t} catch (error) {\r\n\t\t\tLogger.error(\"Error fetching bus predictions\", { error: error.message });\r\n\t\t}\r\n\t}\r\n\r\n\t// Updated updatePredictionsDisplay with a guard check\r\n\tfunction updatePredictionsDisplay(predictionData) {\r\n\t\tif (!predictionData || typeof predictionData !== \"object\" || !predictionData.predictions) {\r\n\t\t\tLogger.error(\"Cannot render predictions: Invalid data format\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// ...existing code...\r\n\t\tlet predictionsSection = document.querySelector('.predictions-section');\r\n\t\tif (!predictionsSection) {\r\n\t\t\tpredictionsSection = document.createElement('div');\r\n\t\t\tpredictionsSection.className = 'bus-section map-section predictions-section';\r\n\r\n\t\t\tconst predictionsHeader = document.createElement('div');\r\n\t\t\tpredictionsHeader.className = 'bus-section-header';\r\n\r\n\t\t\tconst predictionsContent = document.createElement('div');\r\n\t\t\tpredictionsContent.className = 'bus-section-content single-column collapsed';\r\n\r\n\t\t\tpredictionsHeader.innerHTML = `\r\n\t\t\t\t<div class=\"section-header-content\">\r\n\t\t\t\t\t<h3>Bay Predictions</h3>\r\n\t\t\t\t\t<div class=\"predictions-search\">\r\n\t\t\t\t\t\t<input type=\"text\" id=\"predictionsSearch\" placeholder=\"Search bus number...\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button class=\"section-toggle\" aria-label=\"Toggle section\">\r\n\t\t\t\t\t<i class=\"fas fa-chevron-down\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t`;\r\n\r\n\t\t\tpredictionsContent.innerHTML = `\r\n\t\t\t\t<div id=\"predictionsList\" class=\"predictions-list\"></div>\r\n\t\t\t`;\r\n\r\n\t\t\tpredictionsSection.appendChild(predictionsHeader);\r\n\t\t\tpredictionsSection.appendChild(predictionsContent);\r\n\r\n\t\t\t// Insert after the map section if it exists, otherwise after the bus info list\r\n\t\t\tconst mapSection = document.querySelector('.map-section');\r\n\t\t\tif (mapSection) {\r\n\t\t\t\tmapSection.insertAdjacentElement('afterend', predictionsSection);\r\n\t\t\t} else {\r\n\t\t\t\telements.busInfoList.insertAdjacentElement('afterend', predictionsSection);\r\n\t\t\t}\r\n\r\n\t\t\t// Add predictions section toggle handling\r\n\t\t\tpredictionsHeader.addEventListener('click', (event) => {\r\n\t\t\t\t// Don't toggle if clicking in the search input\r\n\t\t\t\tif (event.target.closest('.predictions-search')) return;\r\n\t\t\t\t\r\n\t\t\t\tpredictionsContent.classList.toggle('collapsed');\r\n\t\t\t\tpredictionsHeader.querySelector('.section-toggle').style.transform =\r\n\t\t\t\t\tpredictionsContent.classList.contains('collapsed') ? 'rotate(-180deg)' : 'rotate(0)';\r\n\t\t\t});\r\n\r\n\t\t\tsetupPredictionsSearch();\r\n\t\t}\r\n\r\n\t\tconst predictionsList = document.getElementById('predictionsList');\r\n\t\tif (!predictionsList) return;\r\n\t\tpredictionsList.innerHTML = '';\r\n\r\n\t\tObject.entries(predictionData.predictions).forEach(([busNumber, info]) => {\r\n\t\t\tif (info.predictions && info.predictions.length > 0) {\r\n\t\t\t\tconst card = document.createElement('div');\r\n\t\t\t\tcard.className = 'prediction-card';\r\n\t\t\t\tcard.dataset.busNumber = busNumber.toLowerCase();\r\n\t\t\t\tcard.innerHTML = `\r\n\t\t\t\t\t<div class=\"prediction-header\">\r\n\t\t\t\t\t\t<div class=\"bus-number\">${escapeHTML(busNumber)}</div>\r\n\t\t\t\t\t\t<div class=\"confidence\">\r\n\t\t\t\t\t\t\t<i class=\"fas fa-chart-line\"></i>\r\n\t\t\t\t\t\t\t${info.predictions[0].probability}% confidence\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"prediction-content\">\r\n\t\t\t\t\t\t${info.predictions.map(pred => `\r\n\t\t\t\t\t\t\t<div class=\"predicted-bay\">\r\n\t\t\t\t\t\t\t\tBay ${pred.bay}\r\n\t\t\t\t\t\t\t\t<span class=\"probability\">${pred.probability}%</span>\r\n\t\t\t\t\t\t\t</div>`).join('')}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t`;\r\n\t\t\t\tpredictionsList.appendChild(card);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction setupPredictionsSearch() {\r\n\t\tconst searchInput = document.getElementById('predictionsSearch');\r\n\t\tif (!searchInput) return;\r\n\r\n\t\tsearchInput.addEventListener('input', (e) => {\r\n\t\t\tconst searchTerm = e.target.value.toLowerCase();\r\n\t\t\tconst cards = document.querySelectorAll('.prediction-card');\r\n\r\n\t\t\tcards.forEach(card => {\r\n\t\t\t\tconst busNumber = card.dataset.busNumber;\r\n\t\t\t\tcard.classList.toggle('hidden', !busNumber.includes(searchTerm));\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// Public API\r\n\treturn {\r\n\t\t/**\r\n\t\t * Initializes the BusInfoModule\r\n\t\t */\r\n\t\tinit: init,\r\n\t\t/**\r\n\t\t * Manually refreshes bus information\r\n\t\t */\r\n\t\trefreshBusInfo: fetchBusInfo,\r\n\t\t/**\r\n\t\t * Manually refreshes user preferences\r\n\t\t */\r\n\t\trefreshPreferences: fetchPreferences,\r\n\t\t/**\r\n\t\t * Cleans up the module by clearing intervals\r\n\t\t */\r\n\t\tcleanup: cleanup,\r\n\t};\r\n})();\r\n\r\n// Initialize the module when the DOM is ready\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n\tLogger.info(\"DOM content loaded, initializing BusInfoModule\");\r\n\tBusInfoModule.init();\r\n});\r\n"],"names":["dayjs"],"mappings":"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"}